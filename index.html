<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pixu</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Sour+Gummy:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <style>
    html, body {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    overflow-x: hidden;
    font-family: 'Sour Gummy', system-ui;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  body, #startPage {
    background-image: url("background.png"); /* Ensure this image is in the same directory */
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    color: thistle;
  }

  #startPage {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    animation: fadeIn 3s ease-out;
    text-align: center;
  }

  .logo {
    width: 200px;
    height: auto;
    animation: logoAnimation 2s ease-out forwards;
  }

  .slogan {
    font-size: 2rem;
    margin-top: 20px;
    opacity: 0;
    animation: sloganAnimation 2s ease-out 1s forwards;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes logoAnimation {
    from { transform: scale(0.5); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  @keyframes sloganAnimation {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  nav {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000;
    background: linear-gradient(90deg, #fff8fc, #fff8fc);
    display: flex;
    justify-content: space-around;
    align-items: center;
    height: 60px;
    gap: 40px;
    border-bottom: 2px solid #fff8fc;
  }

  .container {
    max-width: 600px;
    margin: auto;
    padding: 2rem 1rem;
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .post-creator, .auth, .feed, .friends-list {
    background: #fff8fc;
    padding: 1.5rem;
    border-radius: 50px;
    margin-bottom: 1.5rem;
    text-align: center;
    transition: transform 0.2s ease;
  }

  .post-creator:hover,
  .auth:hover,
  .friends-list:hover {
    transform: scale(1.01);
  }

  input, textarea {
    width: 100%;
    padding: 0.75rem;
    margin: 0.75rem -0.80rem;
    border: 2px solid #ffe3e3;
    border-radius: 50px;
    background-color: #fffafc;
    font-size: 1rem;
    color: thistle;
    font-family: 'Sour Gummy', system-ui;
    transition: border-color 0.3s ease;
  }

  input::placeholder, textarea::placeholder {
    color: #efb6c8;
    opacity: 1;
  }

  input:focus, textarea:focus {
    border-color: #f7cfd8;
    outline: none;
  }

  textarea#postContent {
    text-align: center;
  }

  .auth-logo {
    width: 300px;
    height: auto;
    margin: 0 auto -5rem;
    display: block;
    object-fit: contain;
    animation: fadeIn 0.6s ease;
  }

  button {
    padding: 0.6rem 1.2rem;
    background-color: #f7cfd8;
    color: white;
    font-family: 'Sour Gummy', system-ui;
    font-size: 1rem;
    font-weight: bold;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease;
    display: block;
    margin: 1rem auto 0;
    text-align: center;
  }

  .home-btn, .friends-btn, .logout-btn {
    margin: 0;
    padding: 10px 20px;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 40px;
    color: thistle;
  }

  .upload-btn {
    display: inline-block;
    background-color: #fbd6e0;
    color: #fff9bf;
    border-radius: 20px;
    padding: 8px 16px;
    margin: 10px 0;
    cursor: pointer;
    font-family: 'Sour Gummy', system-ui;
    font-size: 14px;
    border: 2px dashed thistle;
    transition: background-color 0.3s ease;
  }

  .upload-btn:hover,
  .home-btn:hover,
  .friends-btn:hover,
  .logout-btn:hover {
    background-color: #ffe6ee;
    color: #eecad5;
  }

  #friendsPanel {
    width: 30%;
    max-width: 300px;
    position: absolute;
    top: 200px;
    left: 50%;
    transform: translateX(-50%);
    background-color: #fff8fc;
    padding: 50px;
    border-radius: 50px;
    box-sizing: border-box;
  }

  #friendsPanel input {
    width: 95%;
    padding: 10px;
    margin: 10px;
    border-radius: 50px;
    border: 1px solid pink;
    box-sizing: border-box;
  }

  .friend {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
    padding: 0.5rem;
    border-bottom: 1px dashed #ffc0cb;
  }

  .hidden {
    display: none;
  }

  a {
    color: #c6e7ff;
    text-decoration: none;
    font-weight: bold;
  }

  a:hover {
    text-decoration: underline;
  }

  .delete-btn,
  .like-btn,
  .add-friend-btn,
  .comment-btn {
    background: none;
    border: none;
    color: #efb6c8;
    cursor: pointer;
    font-weight: bold;
  }

  .like-btn:hover,
  .add-friend-btn:hover,
  .comment-btn:hover {
    color: #cb80ab;
  }

  /* === RESPONSIVE MEDIA QUERIES === */

  @media (max-width: 768px) {
    .container {
      max-width: 95%;
      padding: 1.5rem;
    }

    .auth-logo {
      width: 220px;
      margin-top: -3rem;
    }

    .slogan {
      font-size: 1.5rem;
    }

    .logo {
      width: 150px;
    }

    input, textarea {
      padding: 0.7rem;
      font-size: 0.95rem;
      margin: 0.7rem -0.6rem;
    }

    button {
      font-size: 0.95rem;
      padding: 0.7rem 1.2rem;
    }

    nav {
      gap: 20px;
      padding: 10px 0;
    }
  }

  @media (max-width: 600px) {
    nav {
      flex-direction: column;
      height: auto;
      padding: 0.8rem 0;
    }

    nav img {
      height: 60px;
      margin-bottom: 10px;
    }

    .home-btn, .friends-btn, .logout-btn {
      font-size: 28px;
    }

    #friendsPanel {
      position: static;
      width: 90%;
      margin: 1rem auto;
      padding: 1.5rem;
      transform: none;
    }

    #friendsPanel input {
      width: 100%;
    }

    .slogan {
      font-size: 1.25rem;
    }

    .auth-logo {
      width: 180px;
      margin-top: -2rem;
    }

    input, textarea {
      font-size: 0.9rem;
      padding: 0.65rem;
    }

    button {
      font-size: 0.9rem;
      padding: 0.6rem 1rem;
    }

    .auth p {
      font-size: 0.85rem;
    }

    .upload-btn {
      font-size: 12px;
      padding: 6px 12px;
    }
  }
  </style>
</head>
<body>
  <div id="startPage">
    <img src="logo.png" alt="Pixu Logo" class="logo.png" />
    <div class="slogan">connects life, enjoy moment.</div>
  </div>
    <div id="mainContent" class="hidden"></div>

  <nav id="navbar" class="hidden">
    <img src="logo.png" alt="Logo" style="height: 120px; width: auto; margin-top: 10px;" />
    <button class="home-btn" onclick="showFeed()">
       <i class="fa-solid fa-house"></i>
    </button>
    <button onclick="showFriends()" class="friends-btn">
      <i class="fa-solid fa-user-group"></i>
    </button>
    <button class="logout-btn" onclick="logout()">
      <i class="fa-solid fa-right-from-bracket"></i>
    </button>
  </nav>

  <nav id="main-nav" style="display: none;">...</nav>
  <div id="login-page">...</div>

  <div id="friendsPanel" class="friends-list hidden">
    <h3>friends</h3>
    <div id="friendsList"></div>
    <input type="text" id="friend-username" placeholder="username to add" />
    <button onclick="addFriend()">add friend</button>
  </div>

  <div class="container">
    <div id="loginPage" class="auth">
      <img src="logo.png" alt="Pixu Logo" class="auth-logo" />
      <input type="text" id="login-username" placeholder="username" />
      <input type="password" id="login-password" placeholder="password" />
      <button onclick="login()">login</button>
      <p>don't have an account? <a href="#" onclick="showSignup()">sign up</a></p>
    </div>

    <div id="signupPage" class="auth hidden">
      <img src="logo.png" alt="Pixu Logo" class="auth-logo" />
      <input type="text" id="signup-username" placeholder="username" />
      <input type="password" id="signup-password" placeholder="password" />
      <button onclick="signup()">sign up</button>
      <p>already have an account? <a href="#" onclick="showLogin()">login</a></p>
    </div>

    <div id="feedPage" class="hidden">
      <div class="post-creator">
        <textarea id="postContent" placeholder="what's on your mind?"></textarea>
        <label for="imageUpload" class="upload-btn">upload an image</label>
        <input type="file" id="imageUpload" accept="image/*" hidden>
        <button onclick="createPost()">post</button>
      </div>
    <div id="feed"></div>
    </div>

    <audio id="signupSound" src="click-sound.wav" preload="auto"></audio>
    <audio id="navigateSound" src="click-sound.wav" preload="auto"></audio>
    <audio id="loginSound" src="click-sound.wav" preload="auto"></audio>
    <audio id="logoutSound" src="click-sound.wav" preload="auto"></audio>
    <audio id="homeSound" src="click-sound.wav" preload="auto"></audio>
    <audio id="friendsSound" src="click-sound.wav" preload="auto"></audio>
    <audio id="postSound" src="post-sound.wav" preload="auto"></audio>
    <audio id="typingSound" src="typing-sound.wav" preload="auto"></audio>


  </div>

  <script>
    const loginPage = document.getElementById("loginPage");
    const signupPage = document.getElementById("signupPage");
    const feedPage = document.getElementById("feedPage");
    const navbar = document.getElementById("navbar");
    const friendsPanel = document.getElementById("friendsPanel");
    const friendsList = document.getElementById("friendsList");

    window.onload = function () {
      const user = localStorage.getItem("loggedInUser");
      if (user) {
        showFeed();
      } else {
        showLogin();
      }
    };

    document.querySelectorAll('input, textarea').forEach(element => {
      element.addEventListener('input', () => {
      const sound = document.getElementById("typingSound");
        if (sound) {
          const clone = sound.cloneNode();
          clone.play().catch(err => console.warn("Typing sound error:", err));
        }
      });
    });


    function showLogin() {
      loginPage.classList.remove("hidden");
      signupPage.classList.add("hidden");
      feedPage.classList.add("hidden");
      navbar.classList.add("hidden");
      friendsPanel.classList.add("hidden");
    }

    function showSignup() {
      const sound = document.getElementById('navigateSound');
      if (sound) {
        sound.currentTime = 0;
        sound.play().catch(err => console.warn("Navigate sound error:", err));
      }

      loginPage.classList.add("hidden");
      signupPage.classList.remove("hidden");
      feedPage.classList.add("hidden");
      navbar.classList.add("hidden");
      friendsPanel.classList.add("hidden");
    }

    function showFeed() {
      const sound = document.getElementById("homeSound");
      if (sound) {
        sound.currentTime = 0;
        sound.play().catch(err => console.warn("Home sound error:", err));
      }

      loginPage.classList.add("hidden");
      signupPage.classList.add("hidden");
      feedPage.classList.remove("hidden");
      navbar.classList.remove("hidden");
      friendsPanel.classList.add("hidden");
      loadFeed();
      loadFriends();
    }

    function signup() {
      const username = document.getElementById("signup-username").value;
      const password = document.getElementById("signup-password").value;
      if (!username || !password) return alert("please fill all fields.");
      if (localStorage.getItem(username)) return alert("user already exists!");
      localStorage.setItem(username, JSON.stringify({ password, friends: [] }));

      const sound = document.getElementById("signupSound");
      if (sound) {
        sound.play().catch(err => {
          console.log("Signup sound error:", err);
        });
      }

      alert("account created! please login.");
      showLogin();
    }

    function login() {
      const username = document.getElementById("login-username").value;
      const password = document.getElementById("login-password").value;
      const userData = localStorage.getItem(username);
      if (!userData) return alert("user not found!");
      const user = JSON.parse(userData);
      if (user.password !== password) return alert("wrong password!");
      localStorage.setItem("loggedInUser", username);

      const sound = document.getElementById("loginSound");
      if (sound) {
        sound.play().catch(err => {
          console.log("Login sound error:", err);
        });
      }

      showFeed();
    }

    function logout() {
      const logoutSound = document.getElementById("logoutSound");
      if (logoutSound) {
        logoutSound.currentTime = 0;
        logoutSound.play().catch(err => console.warn("Logout sound error:", err));
      }

      localStorage.removeItem("loggedInUser");
      showLogin();
      document.getElementById("friendsPanel").classList.add("hidden");
    }

    function addFriend() {
      const friendUsername = document.getElementById("friend-username").value.trim();
      if (!friendUsername) return;
      const loggedInUser = localStorage.getItem("loggedInUser");
      const userData = JSON.parse(localStorage.getItem(loggedInUser));
      if (userData.friends.includes(friendUsername)) return alert("already friends!");
      const friendData = localStorage.getItem(friendUsername);
      if (!friendData) return alert("user not found!");
      userData.friends.push(friendUsername);
      localStorage.setItem(loggedInUser, JSON.stringify(userData));
      alert(`you are now friends with ${friendUsername}!`);
      loadFriends();
    }

    function showFriends() {
      const sound = document.getElementById("friendsSound");
      if (sound) {
        sound.currentTime = 0;
        sound.play().catch(err => console.warn("Friends sound error:", err));
      }

      document.getElementById("loginPage").classList.add("hidden");
      document.getElementById("signupPage").classList.add("hidden");
      document.getElementById("feedPage").classList.add("hidden");
      document.getElementById("friendsPanel").classList.remove("hidden");
      document.getElementById("navbar").classList.remove("hidden");
      loadFriends();
    }

    function loadFriends() {
      const loggedInUser = localStorage.getItem("loggedInUser");
      const userData = JSON.parse(localStorage.getItem(loggedInUser));
      friendsList.innerHTML = "";
      userData.friends.forEach(friend => {
        const friendDiv = document.createElement("div");
        friendDiv.className = "friend";
        friendDiv.textContent = friend;
        friendsList.appendChild(friendDiv);
      });
    }

    function createPost() {
      const content = document.getElementById("postContent").value.trim();
      const imageInput = document.getElementById("imageUpload");
      const file = imageInput.files[0];

      if (!content) return;

      const username = localStorage.getItem("loggedInUser");

      const postSound = document.getElementById("postSound");
      if (postSound) {
        postSound.currentTime = 0;
        postSound.play().catch(err => console.warn("Post sound error:", err));
      }
      
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          const imageUrl = e.target.result;
          savePost(username, content, imageUrl);
        };
        reader.readAsDataURL(file);
      } else {
        savePost(username, content, null);
      }

      document.getElementById("postContent").value = "";
      imageInput.value = "";
    }

    function savePost(username, content, imageUrl) {
      const post = {
        user: username,
        content,
        image: imageUrl,
        likes: 0,
        comments: []
      };

      const posts = JSON.parse(localStorage.getItem("posts") || "[]");
      posts.unshift(post);
      localStorage.setItem("posts", JSON.stringify(posts));
      loadFeed();
    }

    function loadFeed() {
      const feed = document.getElementById("feed");
      feed.innerHTML = "";
      const posts = JSON.parse(localStorage.getItem("posts") || "[]");
      posts.forEach((post, index) => {
      const postDiv = document.createElement("div");
      postDiv.className = "post auth";

      let imageHTML = "";
      if (post.image) {
        imageHTML = `<img src="${post.image}" alt="Uploaded image" style="max-width:100%; border-radius: 20px; margin-top: 10px;" />`;
      }

      postDiv.innerHTML = `
        <p><strong>${post.user}</strong>: ${post.content}</p>
        ${imageHTML}
      <div>
        <button class="like-btn" onclick="likePost(${index})">ðŸ©µ</button>
        <span>${post.likes}</span> likes
      </div>
      <div>
        <input type="text" id="comment-input-${index}" placeholder="add a comment" />
        <button class="comment-btn" onclick="addComment(${index})">ðŸ’¬ comment</button>
        <button class="delete-btn" onclick="deletePost(${index})">ðŸ—‘</button>
      </div>
      <div id="comments-${index}">
        ${post.comments.map(comment => `<p><strong>${comment.user}:</strong> ${comment.text}</p>`).join('')}
      </div>
      `;
      feed.appendChild(postDiv);
      });
    }

    function likePost(index) {
      const posts = JSON.parse(localStorage.getItem("posts") || "[]");
      posts[index].likes++;
      localStorage.setItem("posts", JSON.stringify(posts));
      loadFeed();
    }

    function addComment(index) {
      const text = document.getElementById(`comment-input-${index}`).value.trim();
      if (!text) return;
      const user = localStorage.getItem("loggedInUser");
      const posts = JSON.parse(localStorage.getItem("posts") || "[]");
      posts[index].comments.push({ user, text });
      localStorage.setItem("posts", JSON.stringify(posts));
      loadFeed();
    }

    function deletePost(index) {
      const confirmation = confirm("are you sure you want to delete this post?");
      if (!confirmation) return;
      const posts = JSON.parse(localStorage.getItem("posts") || "[]");
      posts.splice(index, 1);
      localStorage.setItem("posts", JSON.stringify(posts));
      loadFeed();
    }
    
    const textarea = document.getElementById('postContent');
    textarea.addEventListener('input', () => {
      textarea.placeholder = textarea.value.trim() !== '' ? '' : "what's on your mind?";
    });

    setTimeout(() => {
      document.getElementById("startPage").style.display = 'none';
      document.getElementById("mainContent").classList.remove("hidden");
      showLogin();
    }, 5000);
    </script>
  </body>
</html>
